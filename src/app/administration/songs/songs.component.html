<div class="d-flex">

    <div class="infinite-scroll flex-grow-1 w-100 m-2">
        <ul class="list-group" infiniteScroll [infiniteScrollDistance]="2"
            [infiniteScrollThrottle]="50" [scrollWindow]="false" (scrolled)="onScroll()">
            <li
            class="list-group-item list-group-item-action d-flex" 
            *ngFor="let item of selection$ | async"
            (click)="onSelect(item)"
            [ngClass]="current && current.id == item.id ? 'active' : ''" 
            >
                <img [src]="item.thumbnail || ''" height="100" width="100" default="assets/images/record-vinyl-solid.svg">
                <div class="flex-1 mx-2 d-flex flex-column justify-space-between">
                    <h4>{{ item.title }}</h4>
                    <p><small>{{ item.date | date:'fullDate' }}</small></p>
                </div>
            </li>
        </ul>
    </div>

    <form class="card flex-grow-1 w-100 m-2 py-2 px-4" (ngSubmit)="onSubmit()" #editorForm="ngForm">

        <div class="form-group">
            <label for="title">Song Title</label>
            <input type="text" class="form-control" id="title" placeholder="...Symphony No. 40" name="title" [(ngModel)]="model.title" required>
        </div>

        <div class="form-group">
            <label for="genre">Music Genre</label>
            <input type="text" class="form-control" id="genre" placeholder="...Classical" name="genre" [(ngModel)]="model.genre">
        </div>

        <div class="form-group">
            <label for="date">Date of Conception</label>
            <input type="date" class="form-control" id="date" name="date" [(ngModel)]="model.date">
        </div>

        <div class="form-group">
            <label for="cover-wrapper">Cover Art File</label>
            <div class="custom-file" id="cover-wrapper">
                <input type="file" class="custom-file-input" id="cover" (change)="onCoverChange($event)" [disabled]="submitting">
                <label class="custom-file-label" for="cover">{{ cover.status }}</label>
            </div>
            <div class="progress" style="height: 2px;">
                <div class="progress-bar" [ngClass]="progressState(cover.status)" role="progressbar"></div>
            </div>
        </div>

        <div class="form-group">
            <label for="audio-wrapper">Song Audio File</label>
            <div class="custom-file" id="audio-wrapper">
                <input type="file" class="custom-file-input" id="audio" (change)="onAudioChange($event)" [disabled]="submitting">
                <label class="custom-file-label" for="audio">{{ audio.status }}</label>
            </div>
            <div class="progress" style="height: 2px;">
                <div class="progress-bar" [ngClass]="progressState(audio.status)" role="progressbar"></div>
            </div>
        </div>

        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="favourite" name="favourite" [(ngModel)]="model.favourite">
            <label class="form-check-label" for="favourite">Show On Home Page</label>
        </div>

        <div class="d-flex w-100 mt-2">
            <button class="btn btn-secondary shadow flex-grow-1 m-2" type="submit" [disabled]="submitting">
                {{ current ? "Change" : "Add" }}
            </button>
            <button class="btn btn-danger shadow m-2" type="button" [disabled]="submitting" *ngIf="current" (click)="onRemove()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </form>
</div>