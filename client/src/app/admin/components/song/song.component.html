<app-dialog-form>
    <div class="modal-body d-flex">

        <div class="w-50 p-1">
            <div class="infinite-scroll">
                <ul
                    class="list-group"
                    infiniteScroll
                    [infiniteScrollDistance]="2"
                    [infiniteScrollThrottle]="50"
                    [scrollWindow]="false"
                    (scrolled)="onScroll()"
                >
                    <li
                        *ngFor="let item of selection$ | async"
                        class="list-group-item list-group-item-action d-flex" 
                        (click)="onSelect(item)"
                    >
                        <img [src]="item.thumbnail || ''" height="100" width="100" default="assets/images/record-vinyl-solid.svg">
                        <div class="flex-1 mx-2 d-flex flex-column justify-space-between">
                            <h4>{{ item.title }}</h4>
                            <p>
                                <small>{{ item.date | date:'fullDate' }}</small>
                            </p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="w-50 p-1">
            <form class="card py-2 px-4" [formGroup]="form" (ngSubmit)="onSubmit()">

                <div class="form-group">
                    <label for="title">Song Title</label>
                    <input
                        class="form-control"
                        formControlName="title"
                        type="text"
                        id="title"
                        name="title"
                        placeholder="...Symphony No. 40"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="genre">Music Genre</label>
                    <input
                        class="form-control"
                        formControlName="genre"
                        type="text"
                        id="genre"
                        name="genre"
                        placeholder="...Classical"
                    >
                </div>

                <div class="form-group">
                    <label for="date">Date of Conception</label>
                    <input
                        class="form-control"
                        formControlName="date"
                        type="date"
                        id="date"
                        name="date"
                    >
                </div>

                <div class="form-group">
                    <label for="soundCloud">Sound Cloud Link</label>
                    <input
                        class="form-control"
                        formControlName="soundCloud"
                        type="text"
                        id="soundCloud"
                        name="soundCloud"
                    >
                </div>

                <div class="form-group">
                    <label for="cover-wrapper">Cover Art File</label>
                    <div class="custom-file" id="cover-wrapper">
                        <input
                            class="custom-file-input"
                            type="file"
                            id="cover"
                            (change)="onCoverChange($event)"
                            [disabled]="submitting"
                        >
                        <!-- <label class="custom-file-label" for="cover">{{ cover.status }}</label> -->
                    </div>
                    <div class="progress" style="height: 2px;">
                        <!-- <div class="progress-bar" [ngClass]="progressState(cover.status)" role="progressbar"></div> -->
                    </div>
                </div>

                <div class="form-group">
                    <label for="audio-wrapper">Song Audio File</label>
                    <div class="custom-file" id="audio-wrapper">
                        <input
                            class="custom-file-input"
                            type="file"
                            id="audio"
                            (change)="onAudioChange($event)"
                            [disabled]="submitting"
                        >
                        <!-- <label class="custom-file-label" for="audio">{{ audio.status }}</label> -->
                    </div>
                    <div class="progress" style="height: 2px;">
                        <!-- <div class="progress-bar" [ngClass]="progressState(audio.status)" role="progressbar"></div> -->
                    </div>
                </div>

                <div class="form-check">
                    <input
                        class="form-check-input"
                        formControlName="favourite"
                        type="checkbox"
                        id="favourite"
                        name="favourite"
                    >
                    <label class="form-check-label" for="favourite">Show On Home Page</label>
                </div>

                <div class="d-flex w-100 mt-2">
                    <button class="btn btn-secondary shadow flex-grow-1 m-2" type="submit" [disabled]="submitting">
                        <!-- {{ current ? "Change" : "Add" }} -->
                    </button>
                    <button
                        class="btn btn-danger shadow m-2"
                        type="button"
                        [disabled]="submitting"
                        (click)="onRemove()"
                    >
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </form>
        </div>

    </div>
</app-dialog-form>